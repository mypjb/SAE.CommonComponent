# 需求文档

- 目录
  - [V1.0.0]（#v100）
    - [基础数据]（#基础数据）


## V1.0.0

---

### 基础数据

- 字典（`Dict`）
    
    字典以集群（`clusterId`）为纬度,每个集群内的应用共享字典数据。
    <!-- | 序号 | 字段 | 类型 | 说明 |
    | --- | --- | --- | ---- |
    | 1 | Id | string | 唯一主键。 |
    | 2 | ClusterId | string | 集群标识，在同一个集群内字典数据是共享的。 |
    | 3 | Name | string | 字典显示的值。 |
    | 4 | ParentId | string | 父级标识，字典是树形结构，此处是用来标识所属父级的。 |
    | 5 | Sort | int | 显示序号 |
    | 6 | CreateTime | datetime | 创建时间 | -->

### 集群应用
 - 集群（`AppCluster`）
   
   集群作为顶级结构，它由众多应用组成。集群有两种用法，第一种以服务为纬度，比如说云资源中的`OSS`。所有`OSS`都在`OSS`集群当中，当有租户需要`OSS`存储时，在这个集群当中分配一个`OSS`应用给它。租户只拥有该`OSS`资源的所有权。同理，对于其他类型的服务也可以这么分配。比如说`VOD`、`SSO`、`AI`等。

   第二种把集群看成一个整体，比如说管理控制台。它由众多服务组成，但有些服务又不太适合作为全局服务共享出去。可以把这些服务放到一个集群里，一同进行管理。

 - 集群应用（`App`）

    应用一般更多的被冠以系统、服务，多个应用组成一个集群。它是集群的子集。

 - 应用资源（`AppResource`）

    不管哪种应用，它都有访问路径，应用资源就是指的它。应用资源一来可以了解应用由哪些资源组成，二来搭配`权限`可以进行访问控制。

 - 认证凭据（`Client`）

    资源的访问，总是和加密息息相关，认证凭据旨在用户访问资源时提供加密服务。用于跨集群、应用间的资源访问。**_本系统用于`OAuth`认证密钥_**

### 配置中心

  - 模板（`Template`）
    
    配置的模板，将常用的配置进行通用化，在配置时通过模板便于快速创建使用。配置应当区分通用默认，和系统独享。

  - 配置（`Config`）

    配置在集群内共享，可以分配给集群内多个应用进行复用。

  - 应用配置（`AppConfig`）

    集群拥有多个应用，应用在不同的环境当中（`dev`、`prod`...）拥有不同的配置数据，应用配置旨在为应用和配置建立这种关系。

### 授权中心

  基于位图的RABC授权策略,在角色和权限之上，添加应用资源，每个权限拥有若干资源对象。实际的授权访问是对资源权限判定。

   - 角色（`role`）
     
     角色既可以独立存在，也可以充当权限的集合。在对对象授权时，角色是最小的授权单位，对象智能被赋予角色，不能在往下细分。

   - 权限（`permission`）

     权限角色的子集，一个权限可以拥有多个资源。资源信息请查案`应用资源`。

   - 客户端角色（`ClientRole`）
      
     客户端角色将为客户端认证分配`资源`的访问`权限`。
   
   - 用户角色（`UserRole`）
     
     为用户分配`资源`的访问`权限`。

   - 超级管理员（`SuperAdmin`）

     有些时候我们需要为一些特殊的`Client`、`User`分配特权。`SuperAdmin`意味着对象拥有系统的所有权限。

### 多租户系统

   - 租户（`Tenant`）
     
     把整个SAE系统看成一个汽车生产车间，用户看成租户。用户可以从我们这购买任意不同品种的车子（系统）进行行驶，我们在车险期内保证车子的正常使用。

   - 租户应用（`TenantApp`）
     
     租户应用，指定租户拥有多少系统资源。

### 插件中心
   
   - 插件（`Plugin`）
     
     插件是为了提高系统的扩展性，减轻系统的复杂度和耦合性的。再通俗点，把插件看成通用性（或定制）的微服务。就好像本子、铅笔、橡皮擦。不管什么型号的铅笔都可以在本子上留下痕迹，而不管什么品牌的橡皮擦都能抹去铅笔留下的痕迹。制定好规则，按照规则去执行，达到底耦合高内聚。

### 路由菜单
  
  - 菜单（`Menu`）
    
    菜单定义了资源的访问目录。

### 用户数据

  - 用户（`User`）

    用户的基本信息。
